[Auth] Token check - Has token: true Has user: false Loading: true
bc40e0fa-d58a-4662-8395-0a7f44b71cbb:1 Banner not shown: beforeinstallpromptevent.preventDefault() called. The page must call beforeinstallpromptevent.prompt() to show the banner.
index-CRjgGam_.js:272 [App] Draft route matched with params: Object
index-CRjgGam_.js:272 [App] Current location: https://mok-sports-draft-mokfantasysport.replit.app/draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-CRjgGam_.js:272 [Draft] Component render started
index-CRjgGam_.js:272 [Draft] All useState hooks declared
index-CRjgGam_.js:272 [Draft] All hooks declared, starting conditional logic
index-CRjgGam_.js:272 [WebSocket] Attempting connection for draft: bc40e0fa-d58a-4662-8395-0a7f44b71cbb user: d8873675-274c-46f9-ab48-00955c81d875
index-CRjgGam_.js:272 [WebSocket] Connecting to: wss://mok-sports-draft-mokfantasysport.replit.app/draft-ws?userId=d8873675-274c-46f9-ab48-00955c81d875&draftId=bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-CRjgGam_.js:272 [WebSocket] Current location: https://mok-sports-draft-mokfantasysport.replit.app/draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-CRjgGam_.js:272 [WebSocket] Protocol detected: wss:
index-CRjgGam_.js:272 [WebSocket] Target host: mok-sports-draft-mokfantasysport.replit.app
index-CRjgGam_.js:272 [Draft] === STARTING DRAFT FETCH ===
index-CRjgGam_.js:272 [Draft] Draft ID: bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-CRjgGam_.js:272 [Draft] Auth status - User: Mok Sports Authenticated: false Loading: false
index-CRjgGam_.js:272 [Draft] Token available: true
index-CRjgGam_.js:272 [Draft] Current URL: https://mok-sports-draft-mokfantasysport.replit.app/draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-CRjgGam_.js:272 [Draft] Current pathname: /draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-CRjgGam_.js:272 [Draft] Making API request to: /api/drafts/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-CRjgGam_.js:272 [Draft] Timer expiration useEffect called
index-CRjgGam_.js:228 [Auth] Token check - Has token: true Has user: true Loading: false
index-CRjgGam_.js:272 [App] Draft route matched with params: Object
index-CRjgGam_.js:272 [App] Current location: https://mok-sports-draft-mokfantasysport.replit.app/draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-CRjgGam_.js:272 [Draft] Component render started
index-CRjgGam_.js:272 [Draft] All useState hooks declared
index-CRjgGam_.js:272 [Draft] All hooks declared, starting conditional logic
index-CRjgGam_.js:228 [SubscriptionManager] 7:30:35 PM - Permission is granted and no active subscription - auto-creating subscription
index-CRjgGam_.js:228 [AutoPushRefresh] Legacy hook delegating to SubscriptionManager
index-CRjgGam_.js:272 [App] Draft route matched with params: Object
index-CRjgGam_.js:272 [App] Current location: https://mok-sports-draft-mokfantasysport.replit.app/draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-CRjgGam_.js:272 [Draft] Component render started
index-CRjgGam_.js:272 [Draft] All useState hooks declared
index-CRjgGam_.js:272 [Draft] All hooks declared, starting conditional logic
sw.js?v=1754350235313:15 [SW] Service worker starting, version: v1.4.0-ios-push-fix
sw.js?v=1754350235313:201 [SW] Service worker script loaded successfully
sw.js?v=1754350235313:19 [SW] Installing service worker, version: v1.4.0-ios-push-fix
index-CRjgGam_.js:228 [SW Hook] Service worker registered successfully
sw.js?v=1754350235313:23 [SW] Caching static files
index-CRjgGam_.js:272 [App] Draft route matched with params: Object
index-CRjgGam_.js:272 [App] Current location: https://mok-sports-draft-mokfantasysport.replit.app/draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-CRjgGam_.js:272 [Draft] Component render started
index-CRjgGam_.js:272 [Draft] All useState hooks declared
index-CRjgGam_.js:272 [Draft] All hooks declared, starting conditional logic
index-CRjgGam_.js:272 [WebSocket] Successfully connected to draft: bc40e0fa-d58a-4662-8395-0a7f44b71cbb for user: d8873675-274c-46f9-ab48-00955c81d875
index-CRjgGam_.js:272 [Draft] Component render started
index-CRjgGam_.js:272 [Draft] All useState hooks declared
index-CRjgGam_.js:272 [Draft] All hooks declared, starting conditional logic
index-CRjgGam_.js:272 [WebSocket] Received message: connected Object
index-CRjgGam_.js:272 [WebSocket] Connected to draft successfully
index-CRjgGam_.js:272 [Draft] Component render started
index-CRjgGam_.js:272 [Draft] All useState hooks declared
index-CRjgGam_.js:272 [Draft] All hooks declared, starting conditional logic
index-CRjgGam_.js:272 [Draft] Component render started
index-CRjgGam_.js:272 [Draft] All useState hooks declared
index-CRjgGam_.js:272 [Draft] All hooks declared, starting conditional logic
sw.js?v=1754350235313:26 [SW] Static files cached successfully
index-CRjgGam_.js:272 [WebSocket] Received message: pong Object
index-CRjgGam_.js:272 [WebSocket] Received pong from server
index-CRjgGam_.js:272 [Draft] Component render started
index-CRjgGam_.js:272 [Draft] All useState hooks declared
index-CRjgGam_.js:272 [Draft] All hooks declared, starting conditional logic
index-CRjgGam_.js:272 [Draft] Response received: Object
index-CRjgGam_.js:272 [Draft] Successfully fetched draft data: Object
index-CRjgGam_.js:272 [Draft] === DRAFT FETCH SUCCESS ===
index-CRjgGam_.js:272 [Draft] Component render started
index-CRjgGam_.js:272 [Draft] All useState hooks declared
index-CRjgGam_.js:272 [Draft] All hooks declared, starting conditional logic
index-CRjgGam_.js:272 [Draft] Updating local timer from server: 0
index-CRjgGam_.js:272 [Draft] Timer expiration useEffect called
index-CRjgGam_.js:272 [Draft] Component render started
index-CRjgGam_.js:272 [Draft] All useState hooks declared
index-CRjgGam_.js:272 [Draft] All hooks declared, starting conditional logic
index-CRjgGam_.js:228 [SubscriptionManager] 7:30:35 PM - Starting subscription refresh...
index-CRjgGam_.js:272 [App] Draft route matched with params: Object
index-CRjgGam_.js:272 [App] Current location: https://mok-sports-draft-mokfantasysport.replit.app/draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-CRjgGam_.js:272 [Draft] Component render started
index-CRjgGam_.js:272 [Draft] All useState hooks declared
index-CRjgGam_.js:272 [Draft] All hooks declared, starting conditional logic
index-CRjgGam_.js:228 [SubscriptionManager] 7:30:35 PM - Found existing subscription - unsubscribing...
index-CRjgGam_.js:228 [SubscriptionManager] 7:30:35 PM - Existing subscription unsubscribed
index-CRjgGam_.js:228 [SubscriptionManager] 7:30:35 PM - Creating new push subscription...
index-CRjgGam_.js:228 [SubscriptionManager] 7:30:36 PM - Sending subscription to server: https://fcm.googleapis.com/fcm/send/fRkmdLA3Lfw:AP...
sw.js?v=1754350235313:37 [SW] Activating service worker, version: v1.4.0-ios-push-fix
sw.js?v=1754350235313:43 [SW] Found caches: Array(2)
sw.js?v=1754350235313:56 [SW] Service worker activated and controlling all clients
index-CRjgGam_.js:228 [SubscriptionManager] 7:30:36 PM - Server response: 201 
index-CRjgGam_.js:228 [SubscriptionManager] 7:30:36 PM - Subscription registered successfully: Subscription registered successfully
index-CRjgGam_.js:272 [App] Draft route matched with params: Object
index-CRjgGam_.js:272 [App] Current location: https://mok-sports-draft-mokfantasysport.replit.app/draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-CRjgGam_.js:272 [Draft] Component render started
index-CRjgGam_.js:272 [Draft] All useState hooks declared
index-CRjgGam_.js:272 [Draft] All hooks declared, starting conditional logic
sw.js?v=1754350235313:87 [SW] Serving /manifest.json from cache
sw.js?v=1754350235313:87 [SW] Serving /draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb from cache
sw.js?v=1754350235313:91 [SW] Fetching /assets/index-Cn_hjswP.css from network
index-CRjgGam_.js:272 [Draft] === STARTING DRAFT FETCH ===
index-CRjgGam_.js:272 [Draft] Draft ID: bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-CRjgGam_.js:272 [Draft] Auth status - User: Mok Sports Authenticated: true Loading: false
index-CRjgGam_.js:272 [Draft] Token available: true
index-CRjgGam_.js:272 [Draft] Current URL: https://mok-sports-draft-mokfantasysport.replit.app/draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-CRjgGam_.js:272 [Draft] Current pathname: /draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-CRjgGam_.js:272 [Draft] Making API request to: /api/drafts/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-CRjgGam_.js:272 [Draft] Response received: {status: 200, statusText: '', headers: {…}}
index-CRjgGam_.js:272 [Draft] Successfully fetched draft data: {state: {…}, isCurrentUser: true, currentPlayer: {…}}
index-CRjgGam_.js:272 [Draft] === DRAFT FETCH SUCCESS ===