[Auth] Token check - Has token: true Has user: false Loading: true
bc40e0fa-d58a-4662-8395-0a7f44b71cbb:1 Banner not shown: beforeinstallpromptevent.preventDefault() called. The page must call beforeinstallpromptevent.prompt() to show the banner.
index-X7L3OixL.js:272 [App] Draft route matched with params: Object
index-X7L3OixL.js:272 [App] Current location: https://mok-sports-draft-mokfantasysport.replit.app/draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [Draft] Component render started
index-X7L3OixL.js:272 [Draft] All useState hooks declared
index-X7L3OixL.js:272 [Draft] All hooks declared, starting conditional logic
index-X7L3OixL.js:272 [WebSocket] Attempting connection for draft: bc40e0fa-d58a-4662-8395-0a7f44b71cbb user: d8873675-274c-46f9-ab48-00955c81d875
index-X7L3OixL.js:272 [WebSocket] Connecting to: wss://mok-sports-draft-mokfantasysport.replit.app/draft-ws?userId=d8873675-274c-46f9-ab48-00955c81d875&draftId=bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [WebSocket] Current location: https://mok-sports-draft-mokfantasysport.replit.app/draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [WebSocket] Protocol detected: wss:
index-X7L3OixL.js:272 [WebSocket] Target host: mok-sports-draft-mokfantasysport.replit.app
index-X7L3OixL.js:272 [Timer Fallback] Starting enhanced timer polling for draft: bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [Draft] === STARTING DRAFT FETCH ===
index-X7L3OixL.js:272 [Draft] Draft ID: bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [Draft] Auth status - User: Mok Sports Authenticated: false Loading: false
index-X7L3OixL.js:272 [Draft] Token available: true
index-X7L3OixL.js:272 [Draft] Current URL: https://mok-sports-draft-mokfantasysport.replit.app/draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [Draft] Current pathname: /draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [Draft] Making API request to: /api/drafts/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [Draft] Timer expiration useEffect called
index-X7L3OixL.js:228 [Auth] Token check - Has token: true Has user: true Loading: false
index-X7L3OixL.js:272 [App] Draft route matched with params: Object
index-X7L3OixL.js:272 [App] Current location: https://mok-sports-draft-mokfantasysport.replit.app/draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [Draft] Component render started
index-X7L3OixL.js:272 [Draft] All useState hooks declared
index-X7L3OixL.js:272 [Draft] All hooks declared, starting conditional logic
index-X7L3OixL.js:228 [SubscriptionManager] 11:55:52 AM - Permission is granted and no active subscription - auto-creating subscription
index-X7L3OixL.js:228 [AutoPushRefresh] Legacy hook delegating to SubscriptionManager
sw.js?v=1754409351978:15 [SW] Service worker starting, version: v1.4.0-ios-push-fix
sw.js?v=1754409351978:201 [SW] Service worker script loaded successfully
sw.js?v=1754409351978:19 [SW] Installing service worker, version: v1.4.0-ios-push-fix
index-X7L3OixL.js:228 [SW Hook] Service worker registered successfully
index-X7L3OixL.js:272 [App] Draft route matched with params: Object
index-X7L3OixL.js:272 [App] Current location: https://mok-sports-draft-mokfantasysport.replit.app/draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [Draft] Component render started
sw.js?v=1754409351978:23 [SW] Caching static files
index-X7L3OixL.js:272 [Draft] All useState hooks declared
index-X7L3OixL.js:272 [Draft] All hooks declared, starting conditional logic
index-X7L3OixL.js:272 [App] Draft route matched with params: Object
index-X7L3OixL.js:272 [App] Current location: https://mok-sports-draft-mokfantasysport.replit.app/draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [Draft] Component render started
index-X7L3OixL.js:272 [Draft] All useState hooks declared
index-X7L3OixL.js:272 [Draft] All hooks declared, starting conditional logic
index-X7L3OixL.js:272 [Draft] Component render started
index-X7L3OixL.js:272 [Draft] All useState hooks declared
index-X7L3OixL.js:272 [Draft] All hooks declared, starting conditional logic
sw.js?v=1754409351978:26 [SW] Static files cached successfully
index-X7L3OixL.js:272 [WebSocket] Successfully connected to draft: bc40e0fa-d58a-4662-8395-0a7f44b71cbb for user: d8873675-274c-46f9-ab48-00955c81d875
index-X7L3OixL.js:272 [WebSocket] Received message: connected Object
index-X7L3OixL.js:272 [WebSocket] Connected to draft successfully
index-X7L3OixL.js:272 [Draft] Component render started
index-X7L3OixL.js:272 [Draft] All useState hooks declared
index-X7L3OixL.js:272 [Draft] All hooks declared, starting conditional logic
index-X7L3OixL.js:272 [Draft] Response received: Object
index-X7L3OixL.js:272 [Draft] Successfully fetched draft data: Object
index-X7L3OixL.js:272 [Draft] === DRAFT FETCH SUCCESS ===
index-X7L3OixL.js:272 [Draft] Component render started
index-X7L3OixL.js:272 [Draft] All useState hooks declared
index-X7L3OixL.js:272 [Draft] All hooks declared, starting conditional logic
index-X7L3OixL.js:272 [Draft] Updating local timer from server: 0
index-X7L3OixL.js:272 [Draft] Timer expiration useEffect called
index-X7L3OixL.js:272 [Draft] Component render started
index-X7L3OixL.js:272 [Draft] All useState hooks declared
index-X7L3OixL.js:272 [Draft] All hooks declared, starting conditional logic
index-X7L3OixL.js:272 [WebSocket] Received message: pong Object
index-X7L3OixL.js:272 [WebSocket] Received pong from server
index-X7L3OixL.js:272 [Draft] Component render started
index-X7L3OixL.js:272 [Draft] All useState hooks declared
index-X7L3OixL.js:272 [Draft] All hooks declared, starting conditional logic
index-X7L3OixL.js:228 [SubscriptionManager] 11:55:52 AM - Starting subscription refresh...
index-X7L3OixL.js:272 [App] Draft route matched with params: Object
index-X7L3OixL.js:272 [App] Current location: https://mok-sports-draft-mokfantasysport.replit.app/draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [Draft] Component render started
index-X7L3OixL.js:272 [Draft] All useState hooks declared
index-X7L3OixL.js:272 [Draft] All hooks declared, starting conditional logic
index-X7L3OixL.js:228 [SubscriptionManager] 11:55:52 AM - Found existing subscription - unsubscribing...
index-X7L3OixL.js:228 [SubscriptionManager] 11:55:52 AM - Existing subscription unsubscribed
index-X7L3OixL.js:228 [SubscriptionManager] 11:55:52 AM - Creating new push subscription...
index-X7L3OixL.js:228 [SubscriptionManager] 11:55:53 AM - Sending subscription to server: https://fcm.googleapis.com/fcm/send/f4dQU4VHAvA:AP...
sw.js?v=1754409351978:37 [SW] Activating service worker, version: v1.4.0-ios-push-fix
sw.js?v=1754409351978:43 [SW] Found caches: Array(2)
sw.js?v=1754409351978:56 [SW] Service worker activated and controlling all clients
index-X7L3OixL.js:228 [SubscriptionManager] 11:55:53 AM - Server response: 201 
index-X7L3OixL.js:228 [SubscriptionManager] 11:55:53 AM - Subscription registered successfully: Subscription registered successfully
index-X7L3OixL.js:272 [App] Draft route matched with params: Object
index-X7L3OixL.js:272 [App] Current location: https://mok-sports-draft-mokfantasysport.replit.app/draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [Draft] Component render started
index-X7L3OixL.js:272 [Draft] All useState hooks declared
index-X7L3OixL.js:272 [Draft] All hooks declared, starting conditional logic
index-X7L3OixL.js:272 [Timer Fallback] Poll #1 - Timer: undefined Round: undefined Pick: undefined
index-X7L3OixL.js:272 [Timer Fallback] Poll #2 - Timer: undefined Round: undefined Pick: undefined
sw.js?v=1754409351978:87 [SW] Serving /draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb from cache
sw.js?v=1754409351978:87 [SW] Serving /manifest.json from cache
sw.js?v=1754409351978:91 [SW] Fetching /assets/index-Cn_hjswP.css from network
index-X7L3OixL.js:272 [Timer Fallback] Poll #3 - Timer: undefined Round: undefined Pick: undefined
index-X7L3OixL.js:272 [Draft] === STARTING DRAFT FETCH ===
index-X7L3OixL.js:272 [Draft] Draft ID: bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [Draft] Auth status - User: Mok Sports Authenticated: true Loading: false
index-X7L3OixL.js:272 [Draft] Token available: true
index-X7L3OixL.js:272 [Draft] Current URL: https://mok-sports-draft-mokfantasysport.replit.app/draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [Draft] Current pathname: /draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [Draft] Making API request to: /api/drafts/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [Draft] Response received: {status: 200, statusText: '', headers: {…}}
index-X7L3OixL.js:272 [Draft] Successfully fetched draft data: {state: {…}, isCurrentUser: false, currentPlayer: {…}}
index-X7L3OixL.js:272 [Draft] === DRAFT FETCH SUCCESS ===
index-X7L3OixL.js:272 [Timer Fallback] Poll #4 - Timer: undefined Round: undefined Pick: undefined
index-X7L3OixL.js:272 [Timer Fallback] Poll #5 - Timer: undefined Round: undefined Pick: undefined
index-X7L3OixL.js:272 [Timer Fallback] Poll #6 - Timer: undefined Round: undefined Pick: undefined
index-X7L3OixL.js:272 [Draft] === STARTING DRAFT FETCH ===
index-X7L3OixL.js:272 [Draft] Draft ID: bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [Draft] Auth status - User: Mok Sports Authenticated: true Loading: false
index-X7L3OixL.js:272 [Draft] Token available: true
index-X7L3OixL.js:272 [Draft] Current URL: https://mok-sports-draft-mokfantasysport.replit.app/draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [Draft] Current pathname: /draft/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [Draft] Making API request to: /api/drafts/bc40e0fa-d58a-4662-8395-0a7f44b71cbb
index-X7L3OixL.js:272 [Draft] Response received: {status: 200, statusText: '', headers: {…}}
index-X7L3OixL.js:272 [Draft] Successfully fetched draft data: {state: {…}, isCurrentUser: false, currentPlayer: {…}}
index-X7L3OixL.js:272 [Draft] === DRAFT FETCH SUCCESS ===
index-X7L3OixL.js:272 [Timer Fallback] Poll #7 - Timer: undefined Round: undefined Pick: undefined